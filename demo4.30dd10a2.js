import{r as h,a as A,j as D,f as U}from"./vendor.90d19503.js";import{A as $,d as p,S as F,b as E,c as S}from"./index.84784de1.js";const w=d=>{let s={};s.value=d,s.isDown=!1,s.isUp=!0,s.press=void 0,s.release=void 0,s.downHandler=r=>{r.key===s.value&&(s.isUp&&s.press&&s.press(),s.isDown=!0,s.isUp=!1,r.preventDefault())},s.upHandler=r=>{r.key===s.value&&(s.isDown&&s.release&&s.release(),s.isDown=!1,s.isUp=!0,r.preventDefault())};const c=s.downHandler.bind(s),u=s.upHandler.bind(s);return window.addEventListener("keydown",c,!1),window.addEventListener("keyup",u,!1),s.unsubscribe=()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",u)},s},x="https://timesky.oss-cn-hangzhou.aliyuncs.com/pixi/demo",O=d=>{const[s,c]=h.exports.useState(null),u=h.exports.useRef();h.exports.useEffect(()=>{window.document.title=d.meta.title,r()},[]);const r=()=>{const t=new $({width:1e3,height:600,antialias:!0,backgroundAlpha:!0,resolution:1,backgroundColor:11398874});c(t),s||u.current.appendChild(t.view),j(t),C(t)},j=t=>{t.loader.add(`${x}/testMan.json`).load(v);function v(){const o=t.loader.resources[`${x}/testMan.json`].textures;let l=new p(f(o,0,3));l.position.set(100,100),l.animationSpeed=.1,l.loop=!0,l.gotoAndPlay(0),l.visible=!1,l.scale.set(1.4,1.4),t.stage.addChild(l);let i=new p(f(o,4,7));i.position.set(200,100),i.animationSpeed=.1,i.loop=!0,i.gotoAndPlay(0),i.visible=!1,i.scale.set(1.4,1.4),t.stage.addChild(i);let n=new p(f(o,8,11));n.position.set(100,200),n.animationSpeed=.1,n.loop=!0,n.gotoAndPlay(0),n.visible=!1,n.scale.set(1.4,1.4),t.stage.addChild(n);let a=new p(f(o,12,15));a.position.set(200,200),a.animationSpeed=.1,a.loop=!0,a.gotoAndPlay(0),a.visible=!1,a.scale.set(1.4,1.4),t.stage.addChild(a);const e=new F.from("testMan-0.png");e.position.set(100,440),e.scale.set(1.4,1.4),e.vx=0,e.vy=0,t.stage.addChild(e);let b=w("ArrowLeft"),y=w("ArrowUp"),m=w("ArrowRight"),g=w("ArrowDown");b.press=()=>{e.vx=-5,e.vy=0},b.release=()=>{!m.isDown&&e.vy===0&&(e.vx=0)},y.press=()=>{e.vy=-5,e.vx=0},y.release=()=>{!g.isDown&&e.vx===0&&(e.vy=0)},m.press=()=>{e.vx=5,e.vy=0},m.release=()=>{!b.isDown&&e.vy===0&&(e.vx=0)},g.press=()=>{e.vy=5,e.vx=0},g.release=()=>{!y.isDown&&e.vx===0&&(e.vy=0)};let P=N;t.ticker.add(k=>H());function H(k){P()}function N(k){e.x+=e.vx,e.y+=e.vy,e.vx>0?(n.x=e.x,n.y=e.y,l.visible=!1,i.visible=!1,n.visible=!0,a.visible=!1,e.visible=!1):e.vx<0?(i.x=e.x,i.y=e.y,l.visible=!1,i.visible=!0,n.visible=!1,a.visible=!1,e.visible=!1):e.vy<0?(a.x=e.x,a.y=e.y,l.visible=!1,i.visible=!1,n.visible=!1,a.visible=!0,e.visible=!1):e.vy>0?(l.x=e.x,l.y=e.y,l.visible=!0,i.visible=!1,n.visible=!1,a.visible=!1,e.visible=!1):(n.x=e.x,n.y=e.y,l.visible=!1,i.visible=!1,n.visible=!0,a.visible=!1,e.visible=!1)}}},C=t=>{const v=E.from(`${x}/wood.jpg`),o=new S(v,t.screen.width,500);t.stage.addChild(o);const l=E.from(`${x}/ground.png`),i=new S(l,t.screen.width,150);i.y=450,t.stage.addChild(i),t.ticker.add(()=>{o.tilePosition.x-=1,i.tilePosition.x-=3})},f=(t,v=0,o=3)=>{let l=[];for(let i=v;i<=o;i++)l.push(t[`testMan-${i}.png`]);return l},L=()=>{d.history.push("/pixi-practice")};return A("div",{className:"demo-page",children:[A("div",{className:"demo-page-title",children:[d.meta.title," ",D(U,{className:"back-home",onClick:L,children:"\u8FD4\u56DE\u9996\u9875"})]}),D("div",{className:"demo-page-desc",children:"\u8BF7\u6309\u952E\u76D8\u4E0A\u4E0B\u5DE6\u53F3\u952E\u63A7\u5236"}),D("div",{className:"demo-canvas",ref:u})]})};export{O as default};
