import{r as h,a as D,j as A,f as $}from"./vendor.90d19503.js";import{A as M,d as p,S as N,b as S,c as j}from"./index.84784de1.js";const w=d=>{let s={};s.value=d,s.isDown=!1,s.isUp=!0,s.press=void 0,s.release=void 0,s.downHandler=r=>{r.key===s.value&&(s.isUp&&s.press&&s.press(),s.isDown=!0,s.isUp=!1,r.preventDefault())},s.upHandler=r=>{r.key===s.value&&(s.isDown&&s.release&&s.release(),s.isDown=!1,s.isUp=!0,r.preventDefault())};const c=s.downHandler.bind(s),v=s.upHandler.bind(s);return window.addEventListener("keydown",c,!1),window.addEventListener("keyup",v,!1),s.unsubscribe=()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",v)},s},x="https://timesky.oss-cn-hangzhou.aliyuncs.com/pixi/demo",R=d=>{const[s,c]=h.exports.useState(null),v=h.exports.useRef();h.exports.useEffect(()=>{window.document.title=d.meta.title,r()},[]);const r=()=>{const t=new M({width:1e3,height:600,antialias:!0,backgroundAlpha:!0,resolution:1,backgroundColor:11398874});c(t),s||v.current.appendChild(t.view),C(t),L(t)},C=t=>{t.loader.add(`${x}/testMan.json`).load(f);function f(){const o=t.loader.resources[`${x}/testMan.json`].textures;let l=new p(u(o,0,3));l.position.set(100,100),l.animationSpeed=.1,l.loop=!0,l.gotoAndPlay(0),l.visible=!1,l.scale.set(1.4,1.4),t.stage.addChild(l);let i=new p(u(o,4,7));i.position.set(200,100),i.animationSpeed=.1,i.loop=!0,i.gotoAndPlay(0),i.visible=!1,i.scale.set(1.4,1.4),t.stage.addChild(i);let n=new p(u(o,8,11));n.position.set(100,200),n.animationSpeed=.1,n.loop=!0,n.gotoAndPlay(0),n.visible=!1,n.scale.set(1.4,1.4),t.stage.addChild(n);let a=new p(u(o,12,15));a.position.set(200,200),a.animationSpeed=.1,a.loop=!0,a.gotoAndPlay(0),a.visible=!1,a.scale.set(1.4,1.4),t.stage.addChild(a);const e=new N.from("testMan-0.png");e.position.set(100,440),e.scale.set(1.4,1.4),e.vx=0,e.vy=0,t.stage.addChild(e);let b=w("ArrowLeft"),y=w("ArrowUp"),m=w("ArrowRight"),g=w("ArrowDown");b.press=()=>{e.vx=-5,e.vy=0},b.release=()=>{!m.isDown&&e.vy===0&&(e.vx=0)},y.press=()=>{e.vy=-5,e.vx=0},y.release=()=>{!g.isDown&&e.vx===0&&(e.vy=0)},m.press=()=>{e.vx=5,e.vy=0},m.release=()=>{!b.isDown&&e.vy===0&&(e.vx=0)},g.press=()=>{e.vy=5,e.vx=0},g.release=()=>{!y.isDown&&e.vx===0&&(e.vy=0)};let E=U;t.ticker.add(k=>H());function H(k){E()}function U(k){e.x+=e.vx,e.y+=e.vy,e.vx>0?(n.x=e.x,n.y=e.y,l.visible=!1,i.visible=!1,n.visible=!0,a.visible=!1,e.visible=!1):e.vx<0?(i.x=e.x,i.y=e.y,l.visible=!1,i.visible=!0,n.visible=!1,a.visible=!1,e.visible=!1):e.vy<0?(a.x=e.x,a.y=e.y,l.visible=!1,i.visible=!1,n.visible=!1,a.visible=!0,e.visible=!1):e.vy>0?(l.x=e.x,l.y=e.y,l.visible=!0,i.visible=!1,n.visible=!1,a.visible=!1,e.visible=!1):(n.x=e.x,n.y=e.y,l.visible=!1,i.visible=!1,n.visible=!0,a.visible=!1,e.visible=!1)}}},L=t=>{const f=S.from(`${x}/wood.jpg`),o=new j(f,t.screen.width,500);t.stage.addChild(o);const l=S.from(`${x}/ground.png`),i=new j(l,t.screen.width,150);i.y=450,t.stage.addChild(i),t.ticker.add(()=>{o.tilePosition.x-=1,i.tilePosition.x-=3})},u=(t,f=0,o=3)=>{let l=[];for(let i=f;i<=o;i++)l.push(t[`testMan-${i}.png`]);return l},P=()=>{d.history.push("/pixi-practice")};return D("div",{className:"demo-page",children:[D("div",{className:"demo-page-title",children:[d.meta.title," ",A($,{className:"back-home",onClick:P,children:"\u8FD4\u56DE\u9996\u9875"})]}),A("div",{className:"demo-canvas",ref:v})]})};export{R as default};
